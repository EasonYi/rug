import {PathExpressionEngine,TextTreeNode} from "../tree/PathExpression"
import {AstHelper} from "./AstHelper"
import {TreeHelper} from "../tree/TreeHelper"

import {File} from "../model/Core"

let treeHelper = new TreeHelper()

/** 
 * Superclass for decorators on node.
 * Allows us to get to the containing File and update text.
 */
export class TextTreeNodeOps<N extends TextTreeNode> {

    protected astHelper: AstHelper

    constructor(protected node: N, public pexe: PathExpressionEngine) {
        this.astHelper = new AstHelper(pexe)
    }

    /**
     * Delete this node.
     */
    delete() {
        //console.log(`In TextTreeNodeOps.delete on ${this.node}`)
        this.node.update("")
    }

    containingFile(): File {
       return treeHelper.findAncestorWithTag<File>(this.node, "File")
    }

}